<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <button>1111</button>
    <button>2222</button>
    <button>3333</button>
    <p id="p">第一张图片</p>
    <input type="button" value="后退" id="btn"/>
    <script>
    let ary = ['第一张图片','第二张图片','第三张图片'];
    let btns = document.querySelectorAll('button');
    //获取hash值
    let hash = window.location.hash;
    let index = 0;
    //如果有hash值的话就获取当前的index方便渲染页面
    //如果没有的话就直接给他设置一个默认的hash值
    if(hash){
        //["page/0", "0", index: 1, input: "#page/0", groups: undefined]
        index = window.location.hash.match(/page\/(\d)/)[1]
        console.log(index)
        p.innerHTML = ary[index];
    }else{
        window.location.hash='page/0'
    }
    //通过点击按钮修改hash值并且修改页面
      btns.forEach((item,i)=>{
          item.onclick = function(){
            p.innerHTML = ary[i];
            window.location.hash='page/'+i;
          }
      })
    
       btn.onclick = function(){
           index--;
           if(index<0){
               index=0
           }
           window.location.hash = 'page/'+ index;
           //当改变hash值的时候会触发onhashchange这个事件，所以可以通过点击去改变hash的值，从而触发onhashchange事件去操作页面
       }

        window.onhashchange=function(){
            index = window.location.hash.match(/page\/(\d)/)[1];
            p.innerHTML = ary[index];
     }
    </script>
</body>
</html>